<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>рдЧреНрд░рд╛рдо рд╢рдХреНрддрд┐ - рдлреЙрд░реНрдо рдФрд░ рд╡рд┐рдЬреНрдЮрд╛рдкрди</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;700&display=swap" rel="stylesheet">

<style>
  body { 
    background: #e5e7eb; font-family: 'Noto Sans Devanagari', sans-serif;
    display: flex; flex-direction: column; align-items: center; padding: 10px;
  }
  /* рд╡рд┐рдЬреНрдЮрд╛рдкрди рдХрд╛ рд╕реНрдЯрд╛рдЗрд▓ */
  .ad-container { 
    width: 100%; max-width: 500px; height: 90px; 
    background: white; border-radius: 12px; margin: 10px 0;
    overflow: hidden; border: 3px solid #f97316; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  }
  .ad-container img { width: 100%; height: 100%; object-fit: cover; cursor: pointer; }

  .app-card { background: white; width: 100%; max-width: 500px; padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
  .btn-choice { padding: 15px; border-radius: 12px; font-weight: bold; text-align: center; color: white; cursor: pointer; margin-bottom: 10px; font-size: 16px; }
  .form-input { width: 100%; padding: 12px; margin-bottom: 12px; border-radius: 10px; border: 1px solid #ccc; background: #fff; font-size: 16px; }
  label { font-weight: bold; font-size: 14px; color: #333; margin-bottom: 4px; display: block; }
  .btn-submit { width: 100%; padding: 15px; background: #f97316; color: white; border-radius: 12px; font-weight: bold; font-size: 18px; }
</style>
</head>
<body>

  <div class="ad-container" onclick="contactAdmin()">
      <img src="1770902092682 (1).png" alt="рдКрдкрд░ рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди" onerror="this.src='https://via.placeholder.com/500x90?text=рдпрд╣рд╛рдБ+рдЕрдкрдиреА+рдлреЛрдЯреЛ+рд▓рдЧрд╛рдПрдБ'">
  </div>

  <div class="app-card">
    <h1 class="text-3xl font-bold text-orange-600 text-center mb-6">рдЧреНрд░рд╛рдо рд╢рдХреНрддрд┐</h1>
    
    <div id="menu-area">
        <div class="btn-choice bg-blue-600 shadow-lg" onclick="openForm('Worker')">ЁЯС╖ рд╡рд░реНрдХрд░ рд░рдЬрд┐рд╕реНрдЯреНрд░реЗрд╢рди (рдлреЙрд░реНрдо)</div>
        <div class="btn-choice bg-purple-600 shadow-lg" onclick="openForm('Company')">ЁЯПв рдХрдВрдкрдиреА/рдорд╛рд▓рд┐рдХ рднрд░реНрддреА (рдлреЙрд░реНрдо)</div>
        <div class="btn-choice bg-green-600 shadow-lg" onclick="openSearchForm()">ЁЯФО рд╡рд░реНрдХрд░ рдпрд╛ рдиреМрдХрд░реА рдвреВрдБрдвреЗрдВ</div>
        <p class="text-center text-gray-400 text-xs mt-4">рдЧрд╛рдБрд╡ рдХреА рдЕрдкрдиреА рдбрд┐рдЬрд┐рдЯрд▓ рд╕реЗрд╡рд╛</p>
    </div>

    <div id="form-area"></div>
  </div>

  <div class="ad-container" onclick="contactAdmin()">
      <img src="1770902092682 (2).png" alt="рдиреАрдЪреЗ рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди" onerror="this.src='https://via.placeholder.com/500x90?text=рдПрдбрдорд┐рди+рд╕рдВрдкрд░реНрдХ+рд╡рд┐рдЬреНрдЮрд╛рдкрди'">
  </div>

<script>
// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyCuvev3-jwZwQuO_fHYyv2E2ovLny4Lh8Q",
  authDomain: "gram-shakti-b135a.firebaseapp.com",
  databaseURL: "https://gram-shakti-b135a-default-rtdb.firebaseio.com",
  projectId: "gram-shakti-b135a"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function contactAdmin() { window.open("https://wa.me/919784499059", "_blank"); }

// 3. рдкреВрд░рд╛ рдлреЙрд░реНрдо рдПрдХ рд╕рд╛рде (Registration)
function openForm(type) {
    document.getElementById('menu-area').style.display = 'none';
    document.getElementById('form-area').innerHTML = `
        <h2 class="text-xl font-bold mb-4 text-center text-blue-700">${type === 'Worker' ? 'рд╡рд░реНрдХрд░' : 'рдХрдВрдкрдиреА'} рдлреЙрд░реНрдо</h2>
        
        <label>рдирд╛рдо рд▓рд┐рдЦреЗрдВ:</label>
        <input type="text" id="f_name" class="form-input" placeholder="рдкреВрд░рд╛ рдирд╛рдо">
        
        <label>рдХрд╛рдо/рдкрдж рдЪреБрдиреЗрдВ:</label>
        <select id="f_post" class="form-input">
            <option>рдордЬрджреВрд░/рд╣реЗрд▓реНрдкрд░</option><option>рдбреНрд░рд╛рдЗрд╡рд░ (Personal/Taxi)</option>
            <option>рдорд┐рд╕реНрддреНрд░реА/рдХрд╛рд░реАрдЧрд░</option><option>JCB/рдЯреНрд░реИрдХреНрдЯрд░</option>
            <option>рдореИрдиреЗрдЬрд░/рдореБрдиреАрдо</option>
        </select>

        <label>рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░:</label>
        <input type="tel" id="f_phone" class="form-input" placeholder="0000000000">

        <label>рд░рд╛рдЬреНрдп:</label>
        <select id="f_state" class="form-input">
            <option>Rajasthan</option><option>Uttar Pradesh</option><option>Bihar</option><option>Haryana</option><option>MP</option>
        </select>

        <label>рдЬрд┐рд▓рд╛:</label>
        <input type="text" id="f_jila" class="form-input" placeholder="рдЬрд┐рд▓рд╛ рд▓рд┐рдЦреЗрдВ">

        <label>рдкрдВрдЪрд╛рдпрдд:</label>
        <input type="text" id="f_pan" class="form-input" placeholder="рдкрдВрдЪрд╛рдпрдд рд▓рд┐рдЦреЗрдВ">

        <label>рдЧрд╛рдБрд╡:</label>
        <input type="text" id="f_vill" class="form-input" placeholder="рдЧрд╛рдБрд╡ рдХрд╛ рдирд╛рдо">

        <button class="btn-submit" onclick="saveToDB('${type}')">рдбреЗрдЯрд╛ рд╕реЗрд╡ рдХрд░реЗрдВ тЬЕ</button>
        <button class="w-full text-sm text-gray-500 mt-4" onclick="location.reload()">тЖР рд╡рд╛рдкрд╕ рдЬрд╛рдПрдБ</button>
    `;
}

function saveToDB(type) {
    let d = {
        type: type,
        name: document.getElementById('f_name').value.trim(),
        post: document.getElementById('f_post').value,
        phone: document.getElementById('f_phone').value.trim(),
        state: document.getElementById('f_state').value,
        jila: document.getElementById('f_jila').value.trim().toLowerCase(),
        panchayat: document.getElementById('f_pan').value.trim().toLowerCase(),
        village: document.getElementById('f_vill').value.trim().toLowerCase()
    };
    if(!d.name || !d.phone || !d.jila || !d.village) return alert("рдирд╛рдо, рдирдВрдмрд░, рдЬрд┐рд▓рд╛ рдФрд░ рдЧрд╛рдБрд╡ рднрд░рдирд╛ рдЬрд░реВрд░реА рд╣реИ!");
    db.ref('users/').push(d).then(() => { alert("рдбреЗрдЯрд╛ рд╕реЗрд╡ рд╣реЛ рдЧрдпрд╛!"); location.reload(); });
}

// 4. рд╕рд░реНрдЪ рдлреЙрд░реНрдо
function openSearchForm() {
    document.getElementById('menu-area').style.display = 'none';
    document.getElementById('form-area').innerHTML = `
        <h2 class="text-xl font-bold mb-4 text-center">рдЦреЛрдЬреЗрдВ</h2>
        <label>рдХреНрдпрд╛ рдвреВрдБрдв рд░рд╣реЗ рд╣реИрдВ?</label>
        <select id="s_post" class="form-input"><option>рдордЬрджреВрд░/рд╣реЗрд▓реНрдкрд░</option><option>рдбреНрд░рд╛рдЗрд╡рд░ (Personal/Taxi)</option><option>рдорд┐рд╕реНрддреНрд░реА/рдХрд╛рд░реАрдЧрд░</option></select>
        <label>рдЬрд┐рд▓рд╛:</label>
        <input type="text" id="s_jila" class="form-input" placeholder="рдЬрд┐рд▓рд╛ рд▓рд┐рдЦреЗрдВ">
        <label>рдЧрд╛рдБрд╡:</label>
        <input type="text" id="s_vill" class="form-input" placeholder="рдЧрд╛рдБрд╡ рд▓рд┐рдЦреЗрдВ">
        <button class="btn-submit" style="background:#000" onclick="getResults()">рд░рд┐рдЬрд▓реНрдЯ рджреЗрдЦреЗрдВ ЁЯФО</button>
        <button class="w-full text-sm text-gray-500 mt-4" onclick="location.reload()">тЖР рд╡рд╛рдкрд╕ рдЬрд╛рдПрдБ</button>
    `;
}

function getResults() {
    let post = document.getElementById('s_post').value;
    let jila = document.getElementById('s_jila').value.trim().toLowerCase();
    let vill = document.getElementById('s_vill').value.trim().toLowerCase();
    
    document.getElementById('form-area').innerHTML = `<p class="text-center">рдЦреЛрдЬ рдЬрд╛рд░реА рд╣реИ...</p>`;
    db.ref('users/').once('value', snap => {
        let html = ""; let found = false;
        snap.forEach(c => {
            let d = c.val();
            if(d.post === post && d.jila === jila && d.village === vill) {
                html += `<div style="background:#f3f4f6; padding:15px; border-radius:15px; margin-bottom:10px; border-left:6px solid #f97316; display:flex; justify-content:space-between; align-items:center;">
                    <div><b>${d.name}</b><br><small>${d.village.toUpperCase()}, ${d.jila.toUpperCase()}</small></div>
                    <a href="tel:${d.phone}" class="bg-green-600 text-white p-3 rounded-full">ЁЯУЮ</a>
                </div>`;
                found = true;
            }
        });
        document.getElementById('form-area').innerHTML = (found ? html : "рдХреЛрдИ рдирд╣реАрдВ рдорд┐рд▓рд╛ред") + `<button class="btn-submit mt-4" style="background:#666" onclick="location.reload()">рдирдпреА рдЦреЛрдЬ</button>`;
    });
}
</script>
</body>
</html>
