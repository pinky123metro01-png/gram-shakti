<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§∂‡§ï‡•ç‡§§‡§ø - ‡§Ö‡§ñ‡§ø‡§≤ ‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§∏‡•á‡§µ‡§æ</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;700&display=swap" rel="stylesheet">

<style>
  body { background: #f0f2f5; font-family: 'Noto Sans Devanagari', sans-serif; display: flex; flex-direction: column; align-items: center; padding: 10px; }
  .ad-box { width: 100%; max-width: 500px; height: 90px; background: white; border-radius: 12px; margin: 10px 0; overflow: hidden; border: 3px solid #f97316; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
  .ad-box img { width: 100%; height: 100%; object-fit: cover; cursor: pointer; }
  .app-card { background: white; width: 100%; max-width: 500px; padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
  .btn-opt { padding: 16px; border-radius: 12px; font-weight: bold; text-align: center; color: white; cursor: pointer; margin-bottom: 12px; font-size: 16px; display: block; width: 100%; }
  .form-input { width: 100%; padding: 12px; margin-bottom: 12px; border-radius: 10px; border: 1px solid #ccc; font-size: 16px; background: #fff; color: #000; }
  label { font-weight: bold; font-size: 14px; color: #333; margin-bottom: 4px; display: block; }
</style>
</head>
<body>

  <div class="ad-box" onclick="window.open('https://wa.me/919784499059')">
      <img src="1770902092682 (1).png" onerror="this.src='https://via.placeholder.com/500x90?text=Top+Advertisement'">
  </div>

  <div class="app-card">
    <h1 class="text-3xl font-bold text-orange-600 text-center mb-6 italic">‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§∂‡§ï‡•ç‡§§‡§ø</h1>
    
    <div id="menu-area">
        <div class="btn-opt bg-blue-600" onclick="openFullForm('Worker')">üë∑ ‡§µ‡§∞‡•ç‡§ï‡§∞ / ‡§¶‡•Å‡§ï‡§æ‡§®‡§¶‡§æ‡§∞ ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§∂‡§®</div>
        <div class="btn-opt bg-purple-700" onclick="openFullForm('Company')">üè¢ ‡§ï‡§Ç‡§™‡§®‡•Ä / ‡§Æ‡§æ‡§≤‡§ø‡§ï ‡§≠‡§∞‡•ç‡§§‡•Ä</div>
        <div class="btn-opt bg-green-600" onclick="openSearchForm()">üîé ‡§ï‡§æ‡§Æ ‡§Ø‡§æ ‡§µ‡§∞‡•ç‡§ï‡§∞ ‡§¢‡•Ç‡§Å‡§¢‡•á‡§Ç</div>
        <button class="w-full text-blue-600 font-bold mt-4" onclick="window.open('https://wa.me/919784499059')">üí¨ ‡§è‡§°‡§Æ‡§ø‡§® ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ</button>
    </div>

    <div id="form-area"></div>
  </div>

  <div class="ad-box" onclick="window.open('https://wa.me/919784499059')">
      <img src="1770902092682 (2).png" onerror="this.src='https://via.placeholder.com/500x90?text=Bottom+Advertisement'">
  </div>

<script>
// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyCuvev3-jwZwQuO_fHYyv2E2ovLny4Lh8Q",
  authDomain: "gram-shakti-b135a.firebaseapp.com",
  databaseURL: "https://gram-shakti-b135a-default-rtdb.firebaseio.com",
  projectId: "gram-shakti-b135a"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// ‡§≠‡§æ‡§∞‡§§ ‡§ï‡•á ‡§∏‡§≠‡•Ä ‡§∞‡§æ‡§ú‡•ç‡§Ø‡•ã‡§Ç ‡§î‡§∞ UTs ‡§ï‡•Ä ‡§≤‡§ø‡§∏‡•ç‡§ü
const allStates = [
    "Andhra Pradesh", "Arunachal Pradesh", "Assam", "Bihar", "Chhattisgarh", "Goa", "Gujarat", "Haryana", 
    "Himachal Pradesh", "Jharkhand", "Karnataka", "Kerala", "Madhya Pradesh", "Maharashtra", "Manipur", 
    "Meghalaya", "Mizoram", "Nagaland", "Odisha", "Punjab", "Rajasthan", "Sikkim", "Tamil Nadu", 
    "Telangana", "Tripura", "Uttar Pradesh", "Uttarakhand", "West Bengal",
    "Andaman and Nicobar Islands", "Chandigarh", "Dadra and Nagar Haveli and Daman and Diu", 
    "Delhi", "Jammu and Kashmir", "Ladakh", "Lakshadweep", "Puducherry"
];

const categories = [
    "‡§Æ‡§ú‡§¶‡•Ç‡§∞ (Labour)", "‡§∞‡§æ‡§ú‡§Æ‡§ø‡§∏‡•ç‡§§‡•ç‡§∞‡•Ä (Mason)", "‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡§ø‡§∂‡§ø‡§Ø‡§®", "‡§™‡•ç‡§≤‡§Æ‡•ç‡§¨‡§∞", "‡§™‡•á‡§Ç‡§ü‡§∞", 
    "‡§ü‡•á‡§≤‡§∞ (‡§¶‡§∞‡•ç‡§ú‡•Ä)", "‡§¨‡•ù‡§à (Carpenter)", "‡§≤‡•ã‡§π‡§æ‡§∞", "‡§Æ‡•à‡§ï‡•á‡§®‡§ø‡§ï (‡§ó‡§æ‡•ú‡•Ä)", 
    "‡§°‡•ç‡§∞‡§æ‡§á‡§µ‡§∞ (Personal)", "‡§°‡•ç‡§∞‡§æ‡§á‡§µ‡§∞ (Taxi/Ola/Uber)", "JCB ‡§ë‡§™‡§∞‡•á‡§ü‡§∞", "‡§ü‡•ç‡§∞‡•à‡§ï‡•ç‡§ü‡§∞ ‡§°‡•ç‡§∞‡§æ‡§á‡§µ‡§∞",
    "‡§ï‡§ø‡§∞‡§æ‡§®‡§æ ‡§¶‡•Å‡§ï‡§æ‡§®", "‡§°‡•á‡§Ø‡§∞‡•Ä/‡§¶‡•Ç‡§ß", "‡§∏‡§¨‡•ç‡§ú‡•Ä ‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ", "‡§ñ‡§æ‡§¶-‡§¨‡•Ä‡§ú ‡§≠‡§Ç‡§°‡§æ‡§∞", 
    "‡§∏‡•Å‡§™‡§∞‡§µ‡§æ‡§á‡§ú‡§∞", "‡§Æ‡•Å‡§®‡•Ä‡§Æ/‡§Ö‡§ï‡§æ‡§â‡§Ç‡§ü‡•á‡§Ç‡§ü", "‡§ï‡§Ç‡§™‡•ç‡§Ø‡•Ç‡§ü‡§∞ ‡§ë‡§™‡§∞‡•á‡§ü‡§∞", "‡§∏‡§ø‡§ï‡•ç‡§Ø‡•ã‡§∞‡§ø‡§ü‡•Ä ‡§ó‡§æ‡§∞‡•ç‡§°", "‡§ü‡•á‡§Ç‡§ü ‡§π‡§æ‡§â‡§∏"
];

function openFullForm(type) {
    document.getElementById('menu-area').style.display = 'none';
    let stateOptions = allStates.map(s => `<option value="${s}">${s}</option>`).join('');
    let catOptions = categories.map(c => `<option value="${c}">${c}</option>`).join('');
    
    document.getElementById('form-area').innerHTML = `
        <h2 class="text-xl font-bold mb-4 text-center text-blue-800">${type === 'Worker' ? '‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§∂‡§®' : '‡§≠‡§∞‡•ç‡§§‡•Ä'} ‡§´‡•â‡§∞‡•ç‡§Æ</h2>
        
        <label>‡§®‡§æ‡§Æ:</label>
        <input type="text" id="f_name" class="form-input" placeholder="‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ">
        
        <label>‡§ï‡•à‡§ü‡•á‡§ó‡§∞‡•Ä:</label>
        <select id="f_post" class="form-input">${catOptions}</select>

        <label>‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞:</label>
        <input type="tel" id="f_phone" class="form-input" placeholder="0000000000">

        <label>‡§∞‡§æ‡§ú‡•ç‡§Ø:</label>
        <select id="f_state" class="form-input">${stateOptions}</select>

        <label>‡§ú‡§ø‡§≤‡§æ:</label>
        <input type="text" id="f_jila" class="form-input" placeholder="‡§ú‡§ø‡§≤‡§æ ‡§≤‡§ø‡§ñ‡•á‡§Ç">

        <label>‡§™‡§Ç‡§ö‡§æ‡§Ø‡§§:</label>
        <input type="text" id="f_pan" class="form-input" placeholder="‡§™‡§Ç‡§ö‡§æ‡§Ø‡§§ ‡§≤‡§ø‡§ñ‡•á‡§Ç">

        <label>‡§ó‡§æ‡§Å‡§µ:</label>
        <input type="text" id="f_vill" class="form-input" placeholder="‡§ó‡§æ‡§Å‡§µ ‡§ï‡§æ ‡§®‡§æ‡§Æ">

        <button class="w-full p-4 bg-orange-600 text-white rounded-lg font-bold text-lg" onclick="saveData('${type}')">‡§°‡•á‡§ü‡§æ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç ‚úÖ</button>
        <button class="w-full text-gray-500 mt-4 font-bold" onclick="location.reload()">‚Üê ‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§è‡§Å</button>
    `;
}

function saveData(type) {
    let d = {
        type: type,
        name: document.getElementById('f_name').value.trim(),
        post: document.getElementById('f_post').value,
        phone: document.getElementById('f_phone').value.trim(),
        state: document.getElementById('f_state').value,
        jila: document.getElementById('f_jila').value.trim().toLowerCase(),
        panchayat: document.getElementById('f_pan').value.trim().toLowerCase(),
        village: document.getElementById('f_vill').value.trim().toLowerCase()
    };
    if(!d.name || !d.phone || !d.jila || !d.village) return alert("‡§®‡§æ‡§Æ, ‡§®‡§Ç‡§¨‡§∞, ‡§ú‡§ø‡§≤‡§æ ‡§î‡§∞ ‡§ó‡§æ‡§Å‡§µ ‡§≠‡§∞‡§®‡§æ ‡•õ‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à!");
    db.ref('users/').push(d).then(() => { alert("‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ú‡•Å‡•ú ‡§ó‡§è!"); location.reload(); });
}

function openSearchForm() {
    document.getElementById('menu-area').style.display = 'none';
    let stateOptions = allStates.map(s => `<option value="${s}">${s}</option>`).join('');
    let catOptions = categories.map(c => `<option value="${c}">${c}</option>`).join('');
    
    document.getElementById('form-area').innerHTML = `
        <h2 class="text-xl font-bold mb-4 text-center">‡§∏‡§∞‡•ç‡§ö ‡§ï‡§∞‡•á‡§Ç</h2>
        <label>‡§ï‡•ç‡§Ø‡§æ ‡§ö‡§æ‡§π‡§ø‡§è?</label>
        <select id="s_post" class="form-input">${catOptions}</select>
        <label>‡§∞‡§æ‡§ú‡•ç‡§Ø:</label>
        <select id="s_state" class="form-input">${stateOptions}</select>
        <label>‡§ú‡§ø‡§≤‡§æ:</label>
        <input type="text" id="s_jila" class="form-input" placeholder="‡§ú‡§ø‡§≤‡§æ ‡§≤‡§ø‡§ñ‡•á‡§Ç">
        <label>‡§ó‡§æ‡§Å‡§µ:</label>
        <input type="text" id="s_vill" class="form-input" placeholder="‡§ó‡§æ‡§Å‡§µ ‡§≤‡§ø‡§ñ‡•á‡§Ç">
        <button class="w-full p-4 bg-black text-white rounded-lg font-bold" onclick="getResults()">‡§ñ‡•ã‡§ú‡•á‡§Ç üîé</button>
        <button class="w-full text-gray-500 mt-4 font-bold" onclick="location.reload()">‚Üê ‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§è‡§Å</button>
    `;
}

function getResults() {
    let post = document.getElementById('s_post').value;
    let state = document.getElementById('s_state').value;
    let jila = document.getElementById('s_jila').value.trim().toLowerCase();
    let vill = document.getElementById('s_vill').value.trim().toLowerCase();
    
    document.getElementById('form-area').innerHTML = `<p class="text-center p-4">‡§ñ‡•ã‡§ú ‡§ú‡§æ‡§∞‡•Ä ‡§π‡•à...</p>`;
    db.ref('users/').once('value', snap => {
        let html = ""; let found = false;
        snap.forEach(c => {
            let d = c.val();
            if(d.post === post && d.state === state && d.jila === jila && d.village === vill) {
                html += `<div style="background:#fff; padding:15px; border-radius:15px; margin-bottom:10px; border-left:6px solid #f97316; display:flex; justify-content:space-between; align-items:center; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                    <div>
                        <b class="text-lg">${d.name}</b><br>
                        <small class="text-blue-600 font-bold">${d.post}</small><br>
                        <small class="text-gray-500">${d.village.toUpperCase()}, ${d.jila.toUpperCase()}</small>
                    </div>
                    <a href="tel:${d.phone}" class="bg-green-600 text-white p-3 rounded-full shadow-lg">üìû</a>
                </div>`;
                found = true;
            }
        });
        document.getElementById('form-area').innerHTML = (found ? html : "<p class='text-center p-4'>‡§á‡§∏ ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§™‡§∞ ‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§</p>") + 
        `<button class="w-full p-3 bg-gray-500 text-white rounded-lg mt-4 font-bold" onclick="location.reload()">‡§®‡§à ‡§ñ‡•ã‡§ú</button>`;
    });
}
</script>
</body>
</html>
