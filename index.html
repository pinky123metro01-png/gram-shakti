<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ग्राम शक्ति - 10 राज्यों का सेवा पोर्टल</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <style>
        .state-card { height: 150px; border-radius: 15px; overflow: hidden; position: relative; background-size: cover; background-position: center; border: 2px solid white; transition: 0.3s; cursor: pointer; }
        .state-card:active { transform: scale(0.95); }
        .overlay { position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); }
        .hidden { display: none !important; }
    </style>
</head>
<body class="bg-gray-50 font-sans">

    <header class="bg-[#FF5722] text-white p-4 shadow-lg flex justify-between items-center sticky top-0 z-50">
        <h1 class="text-xl font-black italic">ग्राम <span id="admin-gate">शक्ति</span></h1>
        <div class="bg-white text-orange-600 px-2 py-1 rounded-full text-[10px] font-bold uppercase">10 States Live</div>
    </header>

    <div id="app" class="max-w-md mx-auto p-4 min-h-screen">
        
        <div id="screen-states">
            <h2 class="text-gray-500 font-bold mb-4 uppercase text-[10px] tracking-widest text-center">अपना राज्य चुनें</h2>
            <div id="state-grid" class="grid grid-cols-1 gap-4">
                </div>
        </div>

        <div id="screen-location" class="hidden">
            <button onclick="showScreen('states')" class="mb-4 text-orange-600 font-bold text-sm">❮ वापस बदलें</button>
            <h2 class="text-xl font-black mb-4 text-gray-800" id="loc-title">विवरण चुनें</h2>
            <div class="space-y-4">
                <select id="sel-dist" class="w-full p-4 rounded-xl border-2 border-orange-100 outline-none focus:border-orange-500 bg-white font-bold text-gray-700 shadow-sm">
                    <option value="">-- जिला चुनें --</option>
                </select>
                <input type="text" id="inp-tehsil" placeholder="अपनी तहसील का नाम लिखें" class="w-full p-4 rounded-xl border-2 border-orange-100 outline-none focus:border-orange-500 bg-white font-bold shadow-sm">
                <button onclick="goToReg()" class="w-full bg-[#FF5722] text-white py-4 rounded-2xl font-black shadow-xl uppercase tracking-tighter">आगे बढ़ें ❯</button>
            </div>
        </div>

        <div id="screen-reg" class="hidden">
            <div class="bg-white p-6 rounded-3xl shadow-2xl border border-orange-50">
                <h3 class="text-xl font-black mb-6 text-orange-600 uppercase border-b pb-2 italic">वर्कर रजिस्ट्रेशन</h3>
                
                <label class="text-[10px] font-bold text-gray-400 uppercase">काम की श्रेणी</label>
                <select id="w-cat" class="w-full border-2 p-3 rounded-xl mb-4 bg-gray-50 font-bold">
                    <option>मिस्त्री (Mason)</option>
                    <option>बिजलीवाला (Electrician)</option>
                    <option>नलसाज (Plumber)</option>
                    <option>बढ़ई (Carpenter)</option>
                    <option>पेंटर (Painter)</option>
                    <option>मजदूर (Labour)</option>
                    <option>अन्य</option>
                </select>

                <input type="text" id="w-name" placeholder="आपका नाम" class="w-full border-2 p-3 rounded-xl mb-4 outline-none">
                <input type="number" id="w-phone" placeholder="मोबाइल नंबर" class="w-full border-2 p-3 rounded-xl mb-4 outline-none">
                <input type="text" id="v-name" placeholder="गाँव का नाम" class="w-full border-2 p-3 rounded-xl mb-8 bg-gray-50">
                
                <button onclick="submitData()" class="w-full bg-green-600 text-white py-4 rounded-2xl font-black text-lg shadow-xl active:scale-95 transition">डाटा सुरक्षित करें ✅</button>
            </div>
        </div>
    </div>

    <script>
        // 1. 10 राज्यों का डेटा (Name, Government ID, Image)
        const allStates = [
            { name: 'उत्तर प्रदेश', id: 34, img: 'https://images.unsplash.com/photo-1548013146-72479768bbaa?q=80&w=600' },
            { name: 'राजस्थान', id: 29, img: 'https://images.unsplash.com/photo-1599661046289-e31897846e41?q=80&w=600' },
            { name: 'बिहार', id: 5, img: 'https://images.unsplash.com/photo-1593181629936-11c609b8db9b?q=80&w=600' },
            { name: 'मध्य प्रदेश', id: 20, img: 'https://images.unsplash.com/photo-1627834261494-0738e4a9e223?q=80&w=600' },
            { name: 'हरियाणा', id: 13, img: 'https://images.unsplash.com/photo-1622359265107-1c46927a76c7?q=80&w=600' },
            { name: 'पंजाब', id: 28, img: 'https://images.unsplash.com/photo-1605649487212-47bdab064df7?q=80&w=600' },
            { name: 'गुजरात', id: 12, img: 'https://images.unsplash.com/photo-1569383049743-c442dd2448f3?q=80&w=600' },
            { name: 'महाराष्ट्र', id: 21, img: 'https://images.unsplash.com/photo-1570160897040-dc4290f9a82b?q=80&w=600' },
            { name: 'पश्चिम बंगाल', id: 36, img: 'https://images.unsplash.com/photo-1558431382-bb7b68c4b5d7?q=80&w=600' },
            { name: 'कर्नाटक', id: 16, img: 'https://images.unsplash.com/photo-1590733461274-669e96499ae0?q=80&w=600' }
        ];

        // राज्यों को ग्रिड में दिखाना
        const grid = document.getElementById('state-grid');
        allStates.forEach(s => {
            grid.innerHTML += `
                <div onclick="loadDistricts('${s.id}', '${s.name}')" class="state-card shadow-md" style="background-image:url('${s.img}')">
                    <div class="overlay"></div>
                    <span class="absolute bottom-4 left-4 text-white text-xl font-black z-10 uppercase italic tracking-tighter">${s.name}</span>
                </div>
            `;
        });

        // बाकी का लॉजिक (District API, Firebase, ShowScreen) पिछले कोड जैसा ही रहेगा...
        // सुनिश्चित करें कि Firebase Config यहाँ लगा हो
        
        async function loadDistricts(sId, sName) {
            showScreen('location');
            const dSelect = document.getElementById('sel-dist');
            document.getElementById('loc-title').innerText = sName;
            dSelect.innerHTML = "<option>लोड हो रहा है...</option>";
            try {
                const res = await fetch(`https://cdn-api.co-vin.in/api/v2/admin/location/districts/${sId}`);
                const data = await res.json();
                dSelect.innerHTML = '<option value="">-- जिला चुनें --</option>';
                data.districts.forEach(d => {
                    dSelect.innerHTML += `<option value="${d.district_name}">${d.district_name}</option>`;
                });
            } catch(e) { dSelect.innerHTML = '<option value="">त्रुटि: इंटरनेट चेक करें</option>'; }
        }

        function goToReg() {
            if(!document.getElementById('sel-dist').value) return alert("जिला चुनें");
            showScreen('reg');
        }

        function showScreen(id) {
            document.querySelectorAll('#app > div').forEach(d => d.classList.add('hidden'));
            document.getElementById('screen-' + id).classList.remove('hidden');
            window.scrollTo(0,0);
        }
    </script>
</body>
</html>
