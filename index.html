<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§∂‡§ï‡•ç‡§§‡§ø - ‡§ó‡§æ‡§Å‡§µ ‡§ï‡•Ä ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ | Gram Shakti Official</title>
<meta name="description" content="‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§∂‡§ï‡•ç‡§§‡§ø (Gram Shakti): ‡§Ü‡§™‡§ï‡•á ‡§ó‡§æ‡§Å‡§µ ‡§ï‡•á ‡§∏‡§≠‡•Ä ‡§µ‡§∞‡•ç‡§ï‡§∞‡•ç‡§∏, ‡§ú‡•á‡§∏‡•Ä‡§¨‡•Ä, ‡§Æ‡§ø‡§∏‡•ç‡§§‡•ç‡§∞‡•Ä ‡§î‡§∞ ‡§Æ‡§ú‡§¶‡•Ç‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§ñ‡•ã‡§ú‡§®‡•á ‡§ï‡§æ ‡§∏‡§¨‡§∏‡•á ‡§¨‡•ú‡§æ ‡§™‡•ç‡§≤‡•á‡§ü‡§´‡•â‡§∞‡•ç‡§Æ‡•§">

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;500;700&display=swap" rel="stylesheet">

<style>
  body { 
    background: linear-gradient(to bottom right, #fdf4eb, #fffde7, #e0f2fe);
    font-family: 'Noto Sans Devanagari', 'Poppins', sans-serif;
    min-height: 100vh; display: flex; flex-direction: column; align-items: center; padding: 20px;
  }
  .app-card {
    background: white; width: 100%; max-width: 480px; padding: 30px; border-radius: 20px;
    box-shadow: 0 15px 30px rgba(0,0,0,0.1); z-index: 10;
  }
  .ad-space {
    width: 100%; max-width: 480px; background: rgba(0,0,0,0.05);
    border: 1px dashed #ccc; margin: 10px 0; display: flex;
    align-items: center; justify-content: center; color: #888;
    font-size: 12px; border-radius: 10px; min-height: 60px;
  }
  .btn-primary {
    width: 100%; padding: 16px; background: linear-gradient(90deg, #f97316, #ea580c);
    color: white; border-radius: 14px; font-size: 18px; font-weight: 700;
    margin-top: 15px; cursor: pointer; box-shadow: 0 8px 20px rgba(249, 115, 22, 0.4);
  }
  #adminLogo {
    background: #2563eb; color: white; width: 44px; height: 44px;
    border-radius: 50%; display: flex; align-items: center; justify-content: center;
    font-size: 22px; font-weight: bold; cursor: pointer; 
  }
  .header-logo { font-family: 'Poppins', sans-serif; font-weight: 700; color: #f97316; font-size: 2rem; }
</style>
</head>
<body>

  <div style="text-align: center; margin: 15px 0;">
    <a href="https://github.com/gram-shakti-official/gram-shakti/releases/download/v1/gramshakti.apk">
        <img src="1770902092682 (1).png" style="width: 100%; max-width: 480px; border-radius: 12px;">
    </a>
</div>

  <div id="app-container" class="app-card">
    </div>

  <div style="text-align: center; margin: 15px 0;">
    <a href="https://github.com/gram-shakti-official/gram-shakti/releases/download/v1/gramshakti.apk">
        <img src="1770902092682 (2).png" style="width: 100%; max-width: 480px; border-radius: 12px;">
    </a>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCuvev3-jwZwQu0_fHYyv2E2ovLny4LhRQ",
  authDomain: "gram-shakti-b135a.firebaseapp.com",
  databaseURL: "https://gram-shakti-b135a-default-rtdb.firebaseio.com",
  projectId: "gram-shakti-b135a"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let userFlow = { state: "", district: "", panchayat: "", village: "" };

function showStates() {
  const states = ['Andhra Pradesh', 'Arunachal Pradesh', 'Assam', 'Bihar', 'Chhattisgarh', 'Goa', 'Gujarat', 'Haryana', 'Himachal Pradesh', 'Jharkhand', 'Karnataka', 'Kerala', 'Madhya Pradesh', 'Maharashtra', 'Manipur', 'Meghalaya', 'Mizoram', 'Nagaland', 'Odisha', 'Punjab', 'Rajasthan', 'Sikkim', 'Tamil Nadu', 'Telangana', 'Tripura', 'Uttar Pradesh', 'Uttarakhand', 'West Bengal'];
  let html = `
    <div class="flex items-center justify-between mb-6">
      <div id="adminLogo">G</div>
      <h1 class="header-logo">‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§∂‡§ï‡•ç‡§§‡§ø</h1>
      <div class="w-10"></div>
    </div>
    <div class="grid grid-cols-2 gap-3 h-[300px] overflow-y-auto pr-1">`;
  states.forEach(s => { html += `<div onclick="userFlow.state='${s}'; showDistrictStep()" class="border border-orange-500 p-3 rounded-xl text-center text-orange-600 font-bold cursor-pointer hover:bg-orange-50">${s}</div>`; });
  document.getElementById("app-container").innerHTML = html + `</div>`;
  
  // Admin Hold Logic
  const logo = document.getElementById("adminLogo");
  let timer;
  const start = () => { timer = setTimeout(() => { if(prompt("Pass:") === "Vikas0627.") showAdmin(); }, 3000); };
  logo.addEventListener("mousedown", start); logo.addEventListener("touchstart", start);
  logo.addEventListener("mouseup", () => clearTimeout(timer));
}

function showDistrictStep() {
  document.getElementById("app-container").innerHTML = `
    <h1 class="header-logo text-center mb-4">‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§∂‡§ï‡•ç‡§§‡§ø</h1>
    <input id="distInp" class="w-full p-4 border rounded-xl mb-4" placeholder="‡§ú‡§ø‡§≤‡§æ ‡§≤‡§ø‡§ñ‡•á‡§Ç...">
    <button onclick="userFlow.district=document.getElementById('distInp').value; showPanchayatStep()" class="btn-primary">‡§Ü‡§ó‡•á ‡§¨‡•ù‡•á‡§Ç</button>
  `;
}

function showPanchayatStep() {
  document.getElementById("app-container").innerHTML = `
    <h1 class="header-logo text-center mb-4">‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§∂‡§ï‡•ç‡§§‡§ø</h1>
    <input id="panchInp" class="w-full p-4 border rounded-xl mb-4" placeholder="‡§™‡§Ç‡§ö‡§æ‡§Ø‡§§ ‡§≤‡§ø‡§ñ‡•á‡§Ç...">
    <button onclick="userFlow.panchayat=document.getElementById('panchInp').value; showVillageStep()" class="btn-primary">‡§Ü‡§ó‡•á ‡§¨‡•ù‡•á‡§Ç</button>
  `;
}

function showVillageStep() {
  document.getElementById("app-container").innerHTML = `
    <h1 class="header-logo text-center mb-4">‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§∂‡§ï‡•ç‡§§‡§ø</h1>
    <input id="villInp" class="w-full p-4 border rounded-xl mb-4" placeholder="‡§ó‡§æ‡§Å‡§µ ‡§≤‡§ø‡§ñ‡•á‡§Ç...">
    <button onclick="userFlow.village=document.getElementById('villInp').value; showOptions()" class="btn-primary">‡§ñ‡•ã‡§≤‡•á‡§Ç</button>
  `;
}

function showOptions() {
  document.getElementById("app-container").innerHTML = `
    <h1 class="header-logo text-center mb-2">‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§∂‡§ï‡•ç‡§§‡§ø</h1>
    <p class="text-center text-gray-400 text-xs mb-6">${userFlow.village} | ${userFlow.panchayat}</p>
    <button onclick="showReg()" class="btn-primary">ü§ù ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£</button>
    <button onclick="showView()" class="btn-primary !bg-white !text-orange-600 border border-orange-600">üîç ‡§∏‡•á‡§µ‡§æ ‡§ñ‡•ã‡§ú‡•á‡§Ç</button>
  `;
}

function showReg() {
  document.getElementById("app-container").innerHTML = `
    <h1 class="header-logo text-center mb-4">‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§∂‡§®</h1>
    <input id="n" class="w-full p-3 border rounded-lg mb-2" placeholder="‡§®‡§æ‡§Æ">
    <input id="p" class="w-full p-3 border rounded-lg mb-2" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤">
    <select id="w" class="w-full p-3 border rounded-lg mb-4">
      <option value="">‡§ï‡§æ‡§Æ ‡§ö‡•Å‡§®‡•á‡§Ç</option>
      <optgroup label="‡§≠‡§æ‡§∞‡•Ä ‡§Æ‡§∂‡•Ä‡§®‡§∞‡•Ä"><option>JCB Operator</option><option>Tractor</option></optgroup>
      <optgroup label="‡§ï‡§æ‡§∞‡•Ä‡§ó‡§∞"><option>‡§∞‡§æ‡§ú‡§Æ‡§ø‡§∏‡•ç‡§§‡•ç‡§∞‡•Ä</option><option>‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡•Ä‡§∂‡§ø‡§Ø‡§®</option></optgroup>
    </select>
    <button onclick="save()" class="btn-primary">‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç</button>
  `;
}

function save() {
  const name = document.getElementById("n").value;
  const ph = document.getElementById("p").value;
  const wk = document.getElementById("w").value;
  db.ref("workers").push({
    name, phone: ph, work: wk,
    location: `${userFlow.state}/${userFlow.district}/${userFlow.panchayat}/${userFlow.village}`
  }).then(() => { alert("‡§∏‡§´‡§≤!"); showOptions(); });
}

function showView() {
  document.getElementById("app-container").innerHTML = `
    <h1 class="header-logo text-center mb-4">‡§ó‡§æ‡§Å‡§µ ‡§ï‡•Ä ‡§∂‡§ï‡•ç‡§§‡§ø</h1>
    <div id="list" class="space-y-3 max-h-[300px] overflow-y-auto"></div>
    <button onclick="showOptions()" class="mt-4 text-gray-400 text-sm w-full">‡§™‡•Ä‡§õ‡•á ‡§ú‡§æ‡§è‡§Å</button>
  `;
  const path = `${userFlow.state}/${userFlow.district}/${userFlow.panchayat}/${userFlow.village}`;
  db.ref("workers").on("value", snap => {
    let h = "";
    snap.forEach(c => {
      const d = c.val();
      if(d.location === path) h += `<div class="p-3 border rounded-xl flex justify-between items-center shadow-sm">
        <div><p class="font-bold">${d.name}</p><p class="text-orange-600 text-sm">${d.work}</p></div>
        <a href="tel:${d.phone}" class="bg-green-500 text-white p-2 rounded-full">üìû</a>
      </div>`;
    });
    document.getElementById("list").innerHTML = h || "‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ";
  });
}

function showAdmin() {
  document.getElementById("app-container").innerHTML = `<h2 class="text-xl font-bold mb-4">Admin</h2><div id="al" class="space-y-2"></div>`;
  db.ref("workers").on("value", snap => {
    let h = "";
    snap.forEach(c => { h += `<div class="p-2 border flex justify-between text-xs">${c.val().name} <button onclick="db.ref('workers/${c.key}').remove()" class="text-red-500">Del</button></div>`; });
    document.getElementById("al").innerHTML = h;
  });
}

showStates();
</script>
</body>
</html>
